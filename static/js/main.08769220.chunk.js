(this["webpackJsonpreact-first-project"]=this["webpackJsonpreact-first-project"]||[]).push([[0],{118:function(e,t,n){e.exports={preloaderContainer:"Preloader_preloaderContainer__2qmHb",preloader:"Preloader_preloader__3nzjs"}},130:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n(19),a=n(4),c="POST_NEW_TEXT",o={dialogsData:[],messagesData:[]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:4,name:"Tema"},s={id:4,message:t.postText};return Object(a.a)(Object(a.a)({},e),{},{dialogsData:[].concat(Object(r.a)(e.dialogsData),[n]),messagesData:[].concat(Object(r.a)(e.messagesData),[s])});default:return e}},i=function(e){return{type:c,postText:e}}},165:function(e,t,n){e.exports={contentColor:"Music_contentColor__3tC_L"}},174:function(e,t,n){e.exports={captchaImg:"LoginForm_captchaImg__1M2-6"}},199:function(e,t,n){},200:function(e,t,n){},21:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"k",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"i",(function(){return j})),n.d(t,"j",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"h",(function(){return O})),n.d(t,"g",(function(){return g})),n.d(t,"b",(function(){return m}));var r=n(6),a=n.n(r),c=n(9),o=n(84),s=n.n(o).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-Key":"0956be17-9287-4aaa-8ddc-9d18425e88b9"}}),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;return s.get("users?page=".concat(t,"&count=").concat(e,"&term=").concat(n)+(null===r?"":"&friend=".concat(r)),{}).then((function(e){return e.data}))},u=function(e){return s.get("profile/"+e,{})},l=function(e){return s.put("profile/status/",{status:e})},d=function(e){return s.get("profile/status/"+e,{})},j=function(e){var t=new FormData;return t.append("image",e),s.put("profile/photo/",t,{headers:{"Content-Type":"multipart/form-data"}})},b=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.put("profile",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,console.log("finally"),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return s.post("follow/"+e,{},{})},f=function(e){return s.delete("follow/"+e,{})},h=function(){return s.get("auth/me")},O=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;return s.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},g=function(){return s.delete("auth/login")},m=function(){return s.get("security/get-captcha-url")}},32:function(e,t,n){e.exports={nav:"Nav_nav__3jRL3",item:"Nav_item__3Mn2D",active:"Nav_active__10tEP"}},33:function(e,t,n){e.exports={error:"Login_error__3P2GR",formControl:"Login_formControl__2h8Kz",alert:"Login_alert__3TE9q"}},36:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return j}));var r=n(6),a=n.n(r),c=n(9),o=n(4),s=n(21),i={userId:null,email:null,login:null,isLoggedIn:!1,isFetching:!1,confirmation:!1,captchaImg:""},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(o.a)(Object(o.a)({},e),t.data);case"LOGGED_IN_TOGGLE":return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:t.isLoggedIn});case"LOGGED_IN_FETCHING":return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching,confirmation:t.confirmation});case"CAPTCHA":return Object(o.a)(Object(o.a)({},e),{},{captchaImg:t.captchaImg});default:return e}},l={setUserDataAC:function(e,t,n,r){return{type:"SET_USER_DATA",data:{userId:e,email:t,login:n,isLoggedIn:r}}},LoggedInTogglegAC:function(e){return{type:"LOGGED_IN_TOGGLE",isLoggedIn:e}},LoggedInFetchingAC:function(e,t){return{type:"LOGGED_IN_FETCHING",isFetching:e,confirmation:t}},captcha:function(e){return{type:"CAPTCHA",captchaImg:e}}},d=function(e,t,n,r){return function(){var o=Object(c.a)(a.a.mark((function o(i){var u;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(s.h)(e,t,n,r);case 2:0===(u=o.sent).data.resultCode&&i(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(l.LoggedInFetchingAC(!0,!1)),e.next=3,Object(s.f)();case 3:0===(n=e.sent).data.resultCode&&(r=n.data.data,c=r.id,o=r.email,i=r.login,t(l.setUserDataAC(c,o,i,!0))),t(l.LoggedInFetchingAC(!1,!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),10===u.data.resultCode&&i(b());case 5:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},j=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.g)();case 2:0===e.sent.data.resultCode&&t(l.setUserDataAC(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.b)();case 2:n=e.sent,t(l.captcha(n.data.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},366:function(e,t,n){"use strict";n.r(t),n.d(t,"rerenderEntireTree",(function(){return rt}));var r=n(0),a=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,377)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},c=n(24),o=n(58),s=n(130),i=n(4),u={friends:[]},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=Object(i.a)({},e);return t},d=n(6),j=n.n(d),b=n(9),p=n(19),f=n(21),h={users:[],pageSize:100,pageCount:1,totalCount:0,isFetching:!1,followingProgress:[],filter:{term:"",friend:null}},O={followAC:function(e){return{type:"FOLLOW",userId:e}},unfollowAC:function(e){return{type:"UNFOLLOW",userId:e}},setUsersAC:function(e){return{type:"SET_USERS",users:e}},setFilter:function(e,t){return{type:"SET_FILTER",payload:{term:e,friend:t}}},pageSizeAC:function(e){return{type:"PAGE_SIZE",pageSize:e}},pageCountAC:function(e){return{type:"PAGE_COUNT",pageCount:e}},totalCountAR:function(e){return{type:"TOTAL_COUNT",totalCount:e}},togglePreloaderAC:function(e){return{type:"TOGGLE_PRELOADER",isFetching:e}},toggleFollowingProgressAC:function(e,t){return{type:"TOGGLE_FOLLOWING_PROGRESS",followingProgress:e,userId:t}}},g=n(36),m=n(73),v="SET_USER_DATA",x="LOGGED_IN_FETCHING",C=function(e,t,n,r){return{type:v,data:{userId:e,email:t,login:n,isLoggedIn:r}}},_=function(e,t){return{type:x,isFetching:e,confirmation:t}},w=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(_(!0,!1)),e.next=3,Object(m.d)();case 3:0===(n=e.sent).data.resultCode&&(r=n.data.data,a=r.id,c=r.email,o=r.login,t(C(a,c,o,!0))),t(_(!1,!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k="INITIALIZED_SUCCSESS",y={initialized:!1},P=n(83),T=n(162),U=Object(c.c)({profileReducer:o.d,dialogsReducer:s.a,friendsReducer:l,usersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:Object(p.a)(t.users)});case"SET_FILTER":return Object(i.a)(Object(i.a)({},e),{},{filter:t.payload});case"PAGE_SIZE":return Object(i.a)(Object(i.a)({},e),{},{pageSize:t.pageSize});case"PAGE_COUNT":return Object(i.a)(Object(i.a)({},e),{},{pageCount:t.pageCount});case"TOTAL_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalCount:t.totalCount});case"TOGGLE_PRELOADER":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_FOLLOWING_PROGRESS":return Object(i.a)(Object(i.a)({},e),{},{followingProgress:t.followingProgress?[].concat(Object(p.a)(e.followingProgress),[t.userId]):e.followingProgress.filter((function(e){return e!==t.userId}))});default:return e}},authReducer:g.b,appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(i.a)(Object(i.a)({},e),{},{initialized:!0});default:return e}},headerReducer:P.b}),S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,I=Object(c.e)(U,S(Object(c.a)(T.a)));window.store=I;var L=I,F=n(51),E=n.n(F),A=(n(199),n(7)),N=n(8),R=n(12),D=n(13),G=n(1),z=n.n(G),M=(n(200),n(14)),B=n(20),H=n(23),J=n(32),W=n.n(J),V=function(){return Object(r.jsx)("div",{className:W.a.nav,children:Object(r.jsxs)("nav",{children:[Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(B.b,{to:"/Profile/",activeClassName:W.a.active,children:"My Profile"})}),Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(B.b,{to:"/Dialogs",activeClassName:W.a.active,children:"Messages"})}),Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(B.b,{to:"/Users",activeClassName:W.a.active,children:"Users"})}),Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(B.b,{to:"/Music",activeClassName:W.a.active,children:"Music"})}),Object(r.jsx)("div",{className:W.a.item,children:Object(r.jsx)(B.b,{to:"/Settings",activeClassName:W.a.active,children:"Settings"})})]})})},X=n(165),q=n.n(X),K=function(e){return Object(r.jsx)("div",{className:q.a.contentColor,children:Object(r.jsx)("h1",{children:"Music"})})},Z=n(55),Y=n.n(Z),Q=n(75),$=function(e){var t=document.getElementById("profileSettings"),n=function(){t&&(t.style.display="none")};return Object(r.jsx)("header",{className:Y.a.header,children:Object(r.jsx)("div",{className:Y.a.login,children:e.isLoggedIn?Object(r.jsxs)("div",{onMouseOver:function(){t&&(t.style.display="block")},onMouseOut:n,children:[Object(r.jsxs)("div",{className:Y.a.userInfo,children:[Object(r.jsx)("div",{className:Y.a.userLogin,children:Object(r.jsx)("div",{children:Object(r.jsx)("span",{children:e.login})})}),Object(r.jsx)(B.b,{to:"/Profile",children:Object(r.jsx)("div",{className:Y.a.userAvatar,children:Object(r.jsx)("img",{src:e.userProfilePhoto||Q.a,alt:"User avatar"})})})]}),Object(r.jsxs)("div",{id:"profileSettings",className:Y.a.profileSettings,children:[Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:function(){e.logOut()},children:"Log out"})}),Object(r.jsx)("div",{children:Object(r.jsx)(B.b,{to:"/Settings",children:Object(r.jsx)("button",{onClick:n,children:"Profile settings"})})})]})]}):Object(r.jsxs)(B.b,{to:"/Login",children:[" ",Object(r.jsx)("button",{children:"Login"})]})})})},ee=function(e){Object(R.a)(n,e);var t=Object(D.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"componentDidMount",value:function(){this.props.getUserProfilePhotoThunk(this.props.userId)}},{key:"render",value:function(){return Object(r.jsx)($,Object(i.a)({},this.props))}}]),n}(z.a.Component),te=Object(c.d)(M.f,Object(H.b)((function(e){return{isLoggedIn:e.authReducer.isLoggedIn,login:e.authReducer.login,isFetching:e.authReducer.isFetching,userId:e.authReducer.userId,userProfilePhoto:e.headerReducer.userProfilePhoto}}),{logOut:g.c,getUserProfilePhotoThunk:P.a}))(ee),ne=n(39),re=n(56),ae=n(87),ce=n.n(ae),oe=n(69),se=n.n(oe),ie=function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{children:Object(r.jsx)("button",{className:se()(Object(re.a)({},ce.a.checkedButton,e.button===e.pageCount)),onClick:function(){e.removeUsers(),e.getUsers(e.pageSize,e.button,"",null)},children:e.button},e.button)})})},ue=function(e){var t=Object(G.useState)(e.pageCount),n=Object(ne.a)(t,2),a=n[0],c=n[1],o=Object(G.useState)(7),s=Object(ne.a)(o,1)[0],i=Object(G.useState)(5),u=Object(ne.a)(i,2),l=u[0],d=u[1],j=Object(G.useState)(5),b=Object(ne.a)(j,2),p=b[0],f=(b[1],Math.ceil(e.totalCount/e.pageSize)),h=function(){for(var e=[],t=a;t<f+1;t++)e.push(t);return 1===a||a-l<0&&d(l-1+(a-l)),e}().map((function(t){if(!(t>a+s-1))return Object(r.jsx)(ie,{button:t,pageSize:e.pageSize,getUsers:e.getUsers,pageCount:e.pageCount,totalCount:e.totalCount,removeUsers:e.removeUsers})}));return Object(r.jsxs)("div",{className:ce.a.buttonsContainer,children:[1===a?null:Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:function(){c(a-l),!0&&5!==l&&d(5)},children:"\u043d\u0430\u0437\u0430\u0434"})}),h,f-p<=a?null:Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:function(){c(a+p)},children:"\u0412\u043f\u0435\u0440\u0435\u0434"})})]})},le=n(49),de=n.n(le),je=function(e){var t=e.id,n=e.photo,a=e.followed,c=e.followingProgress,o=e.unFollowThunkCreator,s=e.followThunkCreator,i=e.name,u=e.status,l=null;return u&&u.length>50&&(l=u.slice(1,50)+"..."),Object(r.jsxs)("div",{className:de.a.user,children:[Object(r.jsxs)("div",{className:de.a.logoBlock,children:[Object(r.jsx)("div",{children:Object(r.jsx)(B.b,{to:"/Users/"+t,children:Object(r.jsx)("img",{src:null==n?Q.a:n,alt:"UserPhoto"})})}),Object(r.jsx)("div",{children:a?Object(r.jsx)("button",{disabled:c.some((function(e){return e===t})),onClick:function(){o(t)},children:"Unfollow"}):Object(r.jsx)("button",{disabled:c.some((function(e){return e===t})),onClick:function(){s(t)},children:"Follow"})})]}),Object(r.jsxs)("div",{className:de.a.infoBlock,children:[Object(r.jsx)("div",{className:de.a.name,children:i}),Object(r.jsx)("div",{className:de.a.status,children:l||u}),Object(r.jsxs)("div",{className:de.a.country,children:["Belarus",Object(r.jsx)("i",{children:"(hardcode)"}),","]}),Object(r.jsxs)("div",{className:de.a.city,children:["Bralaw",Object(r.jsx)("i",{children:"(hardcode)"})]})]})]})},be=n(88),pe=n.n(be),fe=n(131),he=function(e){return e.usersReducer.users},Oe=function(e){return e.usersReducer.pageSize},ge=function(e){return e.usersReducer.pageCount},me=function(e){return e.usersReducer.totalCount},ve=function(e){return e.usersReducer.isFetching},xe=function(e){return e.usersReducer.followingProgress},Ce=Object(fe.a)(he,(function(e){return e.filter((function(e){return!0}))})),_e=function(e){var t=e.users.map((function(t){return Object(r.jsx)(je,{id:t.id,name:t.name,status:t.status,photo:t.photos.small,followed:t.followed,followingProgress:e.followingProgress,followThunkCreator:e.followThunkCreator,unFollowThunkCreator:e.unFollowThunkCreator},t.id)})),n=Object(H.c)(me);return Object(r.jsxs)("div",{className:pe.a.users,children:[Object(r.jsx)("div",{children:t}),Object(r.jsx)(ue,{pageSize:e.pageSize,totalCount:n,getUsers:e.getUsers,pageCount:e.pageCount,removeUsers:e.removeUsers})]})},we=n(57),ke=n(10),ye=function(e){return Object(r.jsx)("div",{className:pe.a.searchModule,children:Object(r.jsx)(ke.d,{initialValues:{userName:"",friend:null},onSubmit:function(t){function n(){return(n=Object(b.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getUsers(e.pageSize,1,t.userName,t.friend);case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return e.removeUsers(),function(){return n.apply(this,arguments)}()},validateOnChange:!1,children:function(e){return console.log("formik: ",e),Object(r.jsxs)(ke.c,{children:[Object(r.jsx)(ke.b,{as:"input",name:"userName"}),Object(r.jsxs)(ke.b,{name:"friend",as:"select",children:[Object(r.jsx)("option",{value:"null",children:"All"}),Object(r.jsx)("option",{value:"true",children:"Friends"}),Object(r.jsx)("option",{value:"false",children:"Not friends"})]}),Object(r.jsx)("input",{type:"submit",value:"search",disabled:e.isSubmitting})]})}})})},Pe=n(76),Te=function(e){Object(R.a)(n,e);var t=Object(D.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.pageSize,this.props.pageCount,"",null)}},{key:"componentWillUnmount",value:function(){this.props.removeUsersThunkCreator()}},{key:"render",value:function(){return this.props.users.length?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ye,{getUsers:this.props.getUsersThunkCreator,pageSize:this.props.pageSize,pageCount:this.props.pageCount,isFetching:this.props.isFetching,removeUsers:this.props.removeUsersThunkCreator}),Object(r.jsx)(_e,{users:this.props.users,pageSize:this.props.pageSize,followingProgress:this.props.followingProgress,followThunkCreator:this.props.followThunkCreator,unFollowThunkCreator:this.props.unFollowThunkCreator,getUsers:this.props.getUsersThunkCreator,removeUsers:this.props.removeUsersThunkCreator,pageCount:this.props.pageCount,isFetching:this.props.isFetching})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ye,{getUsers:this.props.getUsersThunkCreator,pageSize:this.props.pageSize,pageCount:this.props.pageCount,isFetching:this.props.isFetching,removeUsers:this.props.removeUsersThunkCreator}),Object(r.jsx)(we.a,{})]})}}]),n}(z.a.Component),Ue=Object(c.d)(Object(H.b)((function(e){return{users:Ce(e),pageSize:Oe(e),pageCount:ge(e),totalCount:me(e),isFetching:ve(e),followingProgress:xe(e)}}),{pageSizeAC:O.pageSizeAC,getUsersThunkCreator:function(e,t,n,r){return function(){var a=Object(b.a)(j.a.mark((function a(c){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c(O.togglePreloaderAC(!0)),c(O.pageCountAC(t)),c(O.setFilter(n,r)),a.next=5,Object(f.e)(e,t,n,r);case 5:o=a.sent,c(O.togglePreloaderAC(!1)),c(O.setUsersAC(o.items)),c(O.totalCountAR(o.totalCount));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},removeUsersThunkCreator:function(){return function(e){e(O.setUsersAC([]))}},followThunkCreator:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(O.toggleFollowingProgressAC(!0,e)),t.next=3,Object(f.a)(e);case 3:0===t.sent.data.resultCode&&n(O.followAC(e)),n(O.toggleFollowingProgressAC(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unFollowThunkCreator:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(O.toggleFollowingProgressAC(!0,e)),t.next=3,Object(f.l)(e);case 3:0===t.sent.data.resultCode&&n(O.unfollowAC(e)),n(O.toggleFollowingProgressAC(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},pageCountAC:O.pageCountAC}),Pe.a)(Te),Se=n(30),Ie=n(33),Le=n.n(Ie),Fe=function(e){return Object(r.jsx)("div",{className:Le.a.error,children:e.children})},Ee=function(e){var t=e.name,n=(e.label,e.options),a=Object(Se.a)(e,["name","label","options"]);return Object(r.jsxs)("div",{children:[Object(r.jsx)(ke.b,Object(i.a)(Object(i.a)({name:t},a),{},{children:function(e){var t=e.field;return n.map((function(e){return Object(r.jsxs)(z.a.Fragment,{children:[Object(r.jsx)("div",{children:Object(r.jsx)("label",{htmlFor:e.value,children:e.key})}),Object(r.jsx)("input",Object(i.a)(Object(i.a)({type:"checkbox",id:e.value},t),{},{value:e.value,checked:2===t.value.length}))]},e.key)}))}})),Object(r.jsx)(ke.a,{name:t,component:Fe})]})},Ae=n(168),Ne=n.n(Ae),Re=(n(209),function(e){var t=e.label,n=e.name,a=Object(Se.a)(e,["label","name"]);return Object(r.jsxs)("div",{className:Le.a.formControl,children:[Object(r.jsx)("label",{htmlFor:n,children:t}),Object(r.jsx)(ke.b,{name:n,children:function(e){var t=e.form,c=e.field,o=t.setFieldValue,s=c.value;return Object(r.jsx)(Ne.a,Object(i.a)(Object(i.a)(Object(i.a)({id:n},c),a),{},{selected:s,onChange:function(e){return o(n,e)}}))}}),Object(r.jsx)(ke.a,{name:n,component:Fe})]})}),De=function(e){return Object(r.jsxs)("div",{className:Le.a.formControl,children:[Object(r.jsx)("label",{htmlFor:e.name,children:e.label}),Object(r.jsxs)("div",{children:[Object(r.jsx)(ke.b,{className:e.className,id:e.name,name:e.name,type:e.type,autocomplete:e.autocomplete}),Object(r.jsx)(ke.a,{name:e.name,component:Fe})]})]})},Ge=function(e){var t=e.label,n=e.name,a=e.email,c=e.password,o=e.touchedEmail,s=e.touchedPassword,i=e.type;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(De,{className:se()(Object(re.a)({},Le.a.alert,o&&!a||s&&!c)),name:n,label:t,type:i})})},ze=function(e){var t=e.name,n=e.label,a=e.options,c=Object(Se.a)(e,["name","label","options"]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:t,children:n}),Object(r.jsx)("div",{}),Object(r.jsx)(ke.b,Object(i.a)(Object(i.a)({name:t},c),{},{children:function(e){var t=e.field;return a.map((function(e){return Object(r.jsxs)(z.a.Fragment,{children:[Object(r.jsx)("input",Object(i.a)(Object(i.a)({type:"radio",id:e.value},t),{},{value:e.value,checked:t.value===e.value})),Object(r.jsx)("label",{htmlFor:e.value,children:e.key})]},e.key)}))}})),Object(r.jsx)(ke.a,{name:t,component:Fe})]})},Me=function(e){var t=e.label,n=e.name,a=e.options,c=Object(Se.a)(e,["label","name","options"]);return Object(r.jsxs)("div",{className:Le.a.formControl,children:[Object(r.jsx)("label",{htmlFor:n,children:t}),Object(r.jsx)(ke.b,Object(i.a)(Object(i.a)({as:"select",id:n,name:n},c),{},{children:a.map((function(e){return Object(r.jsx)("option",{value:e.value,children:e.key},e.value)}))})),Object(r.jsx)(ke.a,{name:n,component:Fe})]})},Be=function(e){var t=e.label,n=e.name,a=Object(Se.a)(e,["label","name"]);return Object(r.jsxs)("div",{className:Le.a.formControl,children:[Object(r.jsx)("label",{htmlFor:n,children:t}),Object(r.jsx)(ke.b,Object(i.a)({as:"textarea",id:n,name:n},a)),Object(r.jsx)(ke.a,{name:n,component:Fe})]})},He=function(e){var t=e.control,n=Object(Se.a)(e,["control"]);switch(t){case"input":return Object(r.jsx)(Ge,Object(i.a)({},n));case"textarea":return Object(r.jsx)(Be,Object(i.a)({},n));case"select":return Object(r.jsx)(Me,Object(i.a)({},n));case"radio":return Object(r.jsx)(ze,Object(i.a)({},n));case"checkbox":return Object(r.jsx)(Ee,Object(i.a)({},n));case"date":return Object(r.jsx)(Re,Object(i.a)({},n));default:return null}},Je=n(25),We=n(174),Ve=n.n(We),Xe=Object(H.b)((function(e){return{isLoggedIn:e.authReducer.isLoggedIn,captchaImg:e.authReducer.captchaImg}}),{login:g.d})((function(e){var t=e.login,n=e.isLoggedIn,a=e.captchaImg,c=Je.a({email:Je.b().email("Invalid email format").required("Enter email"),password:Je.b().required("Enter password")});return n?Object(r.jsx)(M.a,{to:"/Profile"}):Object(r.jsx)(ke.d,{initialValues:{email:"",password:"",rememberMe:!0,captcha:""},validationSchema:c,onSubmit:function(e){t(e.email,e.password,e.rememberMe,e.captcha)},children:function(e){return Object(r.jsxs)(ke.c,{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(He,{email:e.values.email,touchedEmail:e.touched.email,control:"input",type:"email",label:"Email",name:"email"}),Object(r.jsx)(He,{password:e.values.password,touchedPassword:e.touched.password,control:"input",type:"password",label:"Password",name:"password"}),Object(r.jsx)("p",{}),Object(r.jsx)("input",{type:"submit",disabled:!e.isValid,value:"Login"}),a?Object(r.jsxs)("div",{className:Ve.a.captchaImg,children:[Object(r.jsx)("p",{}),Object(r.jsx)("img",{src:a,alt:"captcha"}),Object(r.jsx)(He,{control:"input",label:"Enter your captcha",name:"captcha"})]}):null]})}})})),qe=function(e){return function(t){return Object(r.jsx)(z.a.Suspense,{fallback:Object(r.jsx)(we.a,{}),children:Object(r.jsx)(e,Object(i.a)({},t))})}},Ke=function(e){var t=e.profile,n=t.fullName,a=t.aboutMe,c=t.lookingForAJob,o=t.lookingForAJobDescription,s=e.profile.contacts,i=s.facebook,u=s.github,l=s.instagram,d=s.mainLink,p=s.twitter,f=s.vk,h=s.website,O=s.youtube,g=Je.a().shape({contacts:Je.a().shape({github:Je.b().url("Invalid URL!"),vk:Je.b().url("Invalid URL!"),facebook:Je.b().url("Invalid URL!"),instagram:Je.b().url("Invalid URL!"),twitter:Je.b().url("Invalid URL!"),website:Je.b().url("Invalid URL!"),youtube:Je.b().url("Invalid URL!"),mainLink:Je.b().url("Invalid URL!")})}),m={fullName:n,aboutMe:a,lookingForAJob:c,lookingForAJobDescription:o,contacts:{github:u,vk:f,facebook:i,instagram:l,twitter:p,website:h,youtube:O,mainLink:d}};return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(ke.d,{initialValues:m,onSubmit:function(t){function n(){return(n=Object(b.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.sendProfileSettings(t);case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(){return n.apply(this,arguments)}()},validationSchema:g,validateOnChange:!1,children:function(e){return Object(r.jsxs)(ke.c,{children:[Object(r.jsx)("h1",{children:"Profile settings"}),Object(r.jsx)(He,{control:"input",label:"Full Name",name:"fullName"}),Object(r.jsx)(He,{control:"input",label:"About me",name:"aboutMe"}),Object(r.jsx)(He,{control:"input",label:"My skills",name:"lookingForAJobDescription"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{}),Object(r.jsx)(ke.b,{type:"checkbox",name:"lookingForAJob"}),Object(r.jsx)("label",{htmlFor:"lookingForAJob",children:"Looking for a job"})]}),Object(r.jsx)("h3",{children:"Contacts"}),Object(r.jsx)(He,{control:"input",label:"Github",name:"contacts.github"}),Object(r.jsx)(He,{control:"input",label:"vk",name:"contacts.vk"}),Object(r.jsx)(He,{control:"input",label:"Facebook",name:"contacts.facebook"}),Object(r.jsx)(He,{control:"input",label:"Instagram",name:"contacts.instagram"}),Object(r.jsx)(He,{control:"input",label:"Twitter",name:"contacts.twitter"}),Object(r.jsx)(He,{control:"input",label:"Website",name:"contacts.website"}),Object(r.jsx)(He,{control:"input",label:"Youtube",name:"contacts.youtube"}),Object(r.jsx)(He,{control:"input",label:"Main link",name:"contacts.mainLink"}),Object(r.jsx)("input",{type:"submit",value:"save",disabled:e.isSubmitting})]})}})})},Ze=function(e){Object(R.a)(n,e);var t=Object(D.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"componentDidMount",value:function(){this.props.getUserProfileThunkCreator(this.props.userId)}},{key:"componentWillUnmount",value:function(){this.props.removeUserProfileThunkCreator()}},{key:"render",value:function(){return Object(r.jsx)(r.Fragment,{children:this.props.profile?Object(r.jsx)(Ke,{sendProfileSettings:this.props.updateUserProfileSettings,profile:this.props.profile}):null})}}]),n}(z.a.Component),Ye=Object(c.d)(M.f,Object(H.b)((function(e){return{profile:e.profileReducer.profile,userId:e.authReducer.userId}}),{updateUserProfileSettings:o.f,getUserProfileThunkCreator:o.a,removeUserProfileThunkCreator:o.e}),Pe.a)(Ze),Qe=z.a.lazy((function(){return n.e(3).then(n.bind(null,379))})),$e=z.a.lazy((function(){return n.e(4).then(n.bind(null,378))})),et=function(e){Object(R.a)(n,e);var t=Object(D.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(te,{}),Object(r.jsx)(V,{}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(M.b,{path:"/Dialogs",render:qe(Qe)}),Object(r.jsx)(M.b,{path:"/Profile/:userId?",render:qe($e)}),Object(r.jsx)(M.b,{path:"/Users/:userId",render:qe($e)}),Object(r.jsx)(M.b,{exact:!0,path:"/Users",render:function(){return Object(r.jsx)(Ue,{})}}),Object(r.jsx)(M.b,{path:"/Music",render:function(){return Object(r.jsx)(K,{})}}),Object(r.jsx)(M.b,{path:"/Settings",render:function(){return Object(r.jsx)(Ye,{})}}),Object(r.jsx)(M.b,{path:"/Login",render:function(){return Object(r.jsx)(Xe,{})}})]})]})}):Object(r.jsx)(we.a,{})}}]),n}(z.a.Component),tt=Object(c.d)(M.f,Object(H.b)((function(e){return{initialized:e.appReducer.initialized}}),{initializeApp:function(){return function(e){var t=e(w());Promise.all([t]).then((function(){e({type:k})}))}}}))(et),nt=function(){return Object(r.jsx)(B.a,{basename:"/social-network",children:Object(r.jsx)(H.a,{store:L,children:Object(r.jsx)(tt,{})})})},rt=function(){E.a.render(Object(r.jsx)(nt,{}),document.getElementById("root"))};rt(L),window.store=L,a()},49:function(e,t,n){e.exports={user:"User_user__3Kdvq",logoBlock:"User_logoBlock__xhS7H",infoBlock:"User_infoBlock__3O4VD",name:"User_name__3sCD6",status:"User_status__1ssRJ",city:"User_city__1xMuO",country:"User_country__1_5tH"}},55:function(e,t,n){e.exports={header:"Header_header__eA5PG",login:"Header_login__2clXM",userInfo:"Header_userInfo__UZJGJ",userLogin:"Header_userLogin__1B_UB",userAvatar:"Header_userAvatar__8bsmo",profileSettings:"Header_profileSettings__3xpjx"}},57:function(e,t,n){"use strict";var r=n(0),a=(n(1),n.p+"static/media/loaderSVG.2997ce57.svg"),c=n(118),o=n.n(c);t.a=function(){return Object(r.jsx)("div",{className:o.a.preloaderContainer,children:Object(r.jsx)("img",{className:o.a.preloader,src:a,alt:"preloader"})})}},58:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return O})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return m})),n.d(t,"h",(function(){return v})),n.d(t,"c",(function(){return x}));var r=n(6),a=n.n(r),c=n(9),o=n(19),s=n(4),i=n(21),u={posts:[],newPostText:"",profile:null,userStatus:"",loadingPhoto:!1},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_PROFILE":return Object(s.a)(Object(s.a)({},e),{},{profile:t.profile});case"APDATE_USER_STATUS":return Object(s.a)(Object(s.a)({},e),{},{userStatus:t.userStatus});case"UPDATE_USER_PHOTO":return Object(s.a)(Object(s.a)({},e),{},{profile:Object(s.a)(Object(s.a)({},e.profile),{},{photos:t.photos})});case"ADD_NEW_POST":var n={id:1,postText:t.postText,userAva:null,userName:t.login,likesCount:0};return Object(s.a)(Object(s.a)({},e),{},{posts:[].concat(Object(o.a)(e.posts),[n])});case"DELETE_POST":return Object(s.a)(Object(s.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.postId}))});case"LOADING_NEW_PROFILE_PHOTO":return Object(s.a)(Object(s.a)({},e),{},{loadingPhoto:!e.loadingPhoto});default:return e}},d=function(e){return{type:"SET_USER_PROFILE",profile:e}},j=function(e){return{type:"APDATE_USER_STATUS",userStatus:e}},b=function(e){return{type:"UPDATE_USER_PHOTO",photos:e}},p=function(){return{type:"LOADING_NEW_PROFILE_PHOTO"}},f=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.c)(e);case 2:r=t.sent,n(d(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(){return function(e){e(d(null))}},O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.d)(e);case 2:r=t.sent,n(j(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.k)(e);case 2:0===t.sent.data.resultCode&&n(j(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.j)(e);case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.i)(e);case 2:0===(r=t.sent).data.resultCode&&n(b(r.data.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(){return function(e){e(p())}}},73:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"i",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return j})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return h}));var r=n(6),a=n.n(r),c=n(9),o=n(84),s=n.n(o).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-Key":"0956be17-9287-4aaa-8ddc-9d18425e88b9"}}),i=function(e){return s.get("profile/"+e,{})},u=function(e){return s.put("profile/status/",{status:e})},l=function(e){return s.get("profile/status/"+e,{})},d=function(e){var t=new FormData;return t.append("image",e),s.put("profile/photo/",t,{headers:{"Content-Type":"multipart/form-data"}})},j=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.put("profile",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,console.log("finally"),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){return s.get("auth/me")},p=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;return s.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},f=function(){return s.delete("auth/login")},h=function(){return s.get("security/get-captcha-url")}},75:function(e,t,n){"use strict";t.a=n.p+"static/media/defaultAvatar.0334f4b4.png"},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(4),a=n(0),c=n(7),o=n(8),s=n(12),i=n(13),u=n(1),l=n.n(u),d=n(14),j=n(23),b=n(36),p=function(e){var t=function(t){Object(s.a)(u,t);var n=Object(i.a)(u);function u(e){var t;return Object(c.a)(this,u),(t=n.call(this,e)).props=e,t}return Object(o.a)(u,[{key:"render",value:function(){return this.props.isLoggedIn?Object(a.jsx)(e,Object(r.a)({},this.props)):Object(a.jsx)(d.a,{to:"/Login"})}}]),u}(l.a.Component);return Object(j.b)((function(e){return{isLoggedIn:e.authReducer.isLoggedIn,isFetching:e.authReducer.isFetching,confirmation:e.authReducer.confirmation}}),{LoggedInTogglegAC:b.a.LoggedInTogglegAC,LoggedInFetchingAC:b.a.LoggedInFetchingAC,logOut:b.c})(t)}},83:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(6),a=n.n(r),c=n(9),o=n(4),s=n(21),i="SET_USER_PROFILE_PHOTO",u={userProfilePhoto:""},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(o.a)(Object(o.a)({},e),{},{userProfilePhoto:t.userProfilePhoto});default:return e}},d=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.c)(e);case 2:r=t.sent,n((a=r.data.photos.small,{type:i,userProfilePhoto:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()}},87:function(e,t,n){e.exports={buttonsContainer:"PageButton_buttonsContainer__135jv",checkedButton:"PageButton_checkedButton__2t6J4"}},88:function(e,t,n){e.exports={contentColor:"Users_contentColor__2Kips",addUsersButtonContainer:"Users_addUsersButtonContainer__3tC_O",searchModule:"Users_searchModule__2XlsX"}}},[[366,1,2]]]);
//# sourceMappingURL=main.08769220.chunk.js.map